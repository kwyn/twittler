<!DOCTYPE html>
<html>
  <head>
    <title>Twittler</title>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="moment-with-langs.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.min.css" rel="stylesheet">

  </head>
  <body>
    <!--add bootstrap-->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    
    <script>
      var index = 0;
      var last = 0;
      var $body = $('body');      
      var format = "ddd MMM DD YYYY HH:mm:ss"
      var display = function(){
        $body.empty();
        $body.html('<div class="container"> <button class="update">Get New Tweets</button> </div>')
        index = streams.home.length-1;
        
        if( index < 10){
          last = index;
        }else{
          last = index - 10;
        }

        while(index >= last){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          $tweet.html('<div> @ ' + tweet.user + ': ' + tweet.message + '</div> <div> ' + moment(tweet.created_at).fromNow() + '</div>');
          $tweet.appendTo($body.first('div'));
          index -= 1;
        }
      }      

      $(document).ready(function(){
        display();
        $('.update').on('click', display);
      });

      setInterval( function(){display();} , 30000)
      

    </script>
  </body>
</html>
